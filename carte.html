<!DOCTYPE html>
<html lang="fr">
<head>
	<meta name="description" content="Trouvez le milfeuille de vos rêves dans votre région ! Découvrez des profils croustillants, des tests de compatibilité pâtissière et bien plus.">
	<meta name="keywords" content="milfeuille, pâtisserie, amour, rencontre, dessert, caramel, croustillant, sucré">
	<meta name="author" content="Milfeuilles de ta Région">

	<link rel="canonical" href="https://wartets.github.io/Milfeuille/">

	<meta property="og:title" content="Milfeuilles de ta Région">
	<meta property="og:description" content="Découvrez des milfeuilles chauds près de chez vous ! Compatibilité pâtissière, profils croustillants, événements sucrés et plus encore.">
	<meta property="og:image" content="https://wartets.github.io/Milfeuille/image.png">
	<meta property="og:url" content="https://wartets.github.io/Milfeuille/">
	<meta property="og:type" content="website">
	<meta property="og:locale" content="fr_FR">

	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Milfeuilles de ta Région">
	<meta name="twitter:description" content="Un site croustillant pour trouver le dessert (et peut-être l’amour) qu’il vous faut.">
	<meta name="twitter:image" content="https://wartets.github.io/Milfeuille/image.png">

	<link rel="icon" type="image/png" href="image.png">
    <meta charset="UTF-8">
    <title>Milfeuilles de ta Région - Carte</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="style-index.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="script.js" defer></script>
    
    <!-- Leaflet CSS pour la carte -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
	
	<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    
    <style>
        #map {
            height: 400px;
            width: 100%;
            margin-top: 20px;
            border: 5px solid #FFD700; /* Doré pour le thème "millefeuille" */
            border-radius: 10px;
        }
        .leaflet-container {
            background-color: #f9f3e9; /* Couleur claire, un peu comme une pâte feuilletée */
        }
        .milfeuille-marker {
            color: #FF6347; /* Tomate, une couleur pour le côté fun */
        }
    </style>
</head>

<body>

    <div id="consent-popup" class="popup">
        <p>Acceptez-vous les cookies, les millefeuilles et l'amour au caramel ?</p>
        <button id="accept">Oui, je fonds</button>
    </div>

    <button id="geolocate" onclick="window.location.href='profils.html'">Trouver un Milfeuille près de moi</button>

    <nav class="main-menu">
		<a href="index.html">Accueil</a>
        <a href="profils.html">Profils</a>
        <a href="test.html">Test de compatibilité</a>
        <a href="jeu.html">Jeu</a>
        <a href="faq.html">FAQ</a>
    </nav>

    <div class="info-section">
        <h2>Où trouver des Milfeuilles près de chez toi ?</h2>
        <p>Explore notre carte interactive pour localiser les meilleurs millefeuilles de ta région ! Et oui, tu es à un clic de la pâtisserie de tes rêves.</p>
    </div>

    <!-- Carte interactive avec Leaflet -->
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([48.8566, 2.3522], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        var milfeuilleMarker = L.marker([48.8566, 2.3522]).addTo(map);
        milfeuilleMarker.bindPopup("<b>Milfeuille au chocolat chaud !</b><br>À déguster à Paris !").openPopup();

        L.marker([48.8738, 2.2950]).addTo(map).bindPopup("<b>Milfeuille à la crème de pistache !</b><br>À découvrir à Paris !");

        L.marker([48.8606, 2.3376]).addTo(map).bindPopup('<a href="profils/pierre.html"><b>Pierre – “Une crème !”</b></a>');
        L.marker([48.8610, 2.3350]).addTo(map).bindPopup('<a href="profils/vaness.html"><b>Vaness’la Crème – “Il m’a fait fondre...”</b></a>');
        L.marker([48.8616, 2.3280]).addTo(map).bindPopup('<a href="profils/chocophilippe.html"><b>Choco-Philippe – “Plus jamais de chou à la crème.”</b></a>');
        L.marker([48.8597, 2.3310]).addTo(map).bindPopup('<a href="profils/suzette.html"><b>Suzette – “Un feuilleté inversé inoubliable.”</b></a>');
        L.marker([48.8602, 2.3345]).addTo(map).bindPopup('<a href="profils/michel.html"><b>Michel Feuilleté – “Nappage parfait.”</b></a>');
        L.marker([48.8590, 2.3395]).addTo(map).bindPopup('<a href="profils/napoleone.html"><b>Napoléone – “Impériale jusqu’au bout du glaçage.”</b></a>');
        L.marker([48.8580, 2.3420]).addTo(map).bindPopup('<a href="profils/cremehilda.html"><b>Crèmehilda – “Relation roulée approuvée.”</b></a>');
        L.marker([48.8575, 2.3400]).addTo(map).bindPopup('<a href="profils/eric.html"><b>Éric le Sucré – “Micro-ondes validé.”</b></a>');
        L.marker([48.8560, 2.3430]).addTo(map).bindPopup('<a href="profils/lady.html"><b>Lady Mille – “Glaçage de compétition.”</b></a>');
        L.marker([48.8550, 2.3450]).addTo(map).bindPopup('<a href="profils/jean-croute.html"><b>Jean-Croûte – “Sous la croûte, l’amour.”</b></a>');

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var userLat = position.coords.latitude;
                var userLon = position.coords.longitude;
                map.setView([userLat, userLon], 13);
                L.marker([userLat, userLon]).addTo(map).bindPopup("<b>Vous êtes ici !</b>").openPopup();
            });
        }
    </script>
	
	<script>
		// Charge le fichier CSV et place les marqueurs
		Papa.parse('boulangeries-qui-proposent-la-baguette-des-franciliens.csv', {
			download: true,
			header: true,
			delimiter: ",",
			complete: function(results) {
				results.data.forEach(function(row) {
					const coordStr = row["CONCAT LOCALISATION"];
					if (coordStr && coordStr.includes(",")) {
						const [lat, lon] = coordStr.split(',').map(s => parseFloat(s.trim()));
						const nom = row["NOM"] || "Boulangerie";
						const adresse = row["ADRESSE"] || "";
						const ville = row["VILLE"] || "";

						// Vérifie que les coordonnées sont valides
						if (!isNaN(lat) && !isNaN(lon)) {
							L.marker([lat, lon]).addTo(map)
							  .bindPopup(`<b>${nom}</b><br>${adresse}<br>${ville}`);
						}
					}
				});
			},
			error: function(err) {
				console.error("Erreur lors du chargement du fichier CSV :", err);
			}
		});
	</script>
<script>
const boulangeries = [
  {
    NOM: "AU GOUT DU TEMPS",
    ADRESSE: "104 RUE BOBILLOT",
    VILLE: "Paris",
    COORDS: [48.822684, 2.347014]
  },
  {
    NOM: "LES DOUCEURS DE MARIE",
    ADRESSE: "12 RUE RENE BRULAY",
    VILLE: "Sartrouville",
    COORDS: [48.93575, 2.16361]
  },
  {
    NOM: "AU FOURNIL DE GWEN",
    ADRESSE: "17 RUE DES ORMESSONS",
    VILLE: "Vaux-le-Pénil",
    COORDS: [48.526047, 2.681711]
  }
];

boulangeries.forEach(b => {
  L.marker(b.COORDS).addTo(map)
    .bindPopup(`<b>${b.NOM}</b><br>${b.ADRESSE}<br>${b.VILLE}`);
});
</script>
<script>
    fetch('boulangeries-qui-proposent-la-baguette-des-franciliens.json')
        .then(response => response.json())
        .then(data => {
            data.forEach(boulangerie => {
                const lat = parseFloat(boulangerie.latitude);
                const lon = parseFloat(boulangerie.longitude);
                const nom = boulangerie.nom || "Boulangerie inconnue";
                const adresse = boulangerie.result_label || boulangerie.adresse_concat;

                if (!isNaN(lat) && !isNaN(lon)) {
                    L.marker([lat, lon], { title: nom }).addTo(map)
                        .bindPopup(`<b>${nom}</b><br>${adresse}`);
                }
            });
        })
        .catch(error => {
            console.error("Erreur de chargement du fichier JSON :", error);
        });
</script>

</body>
</html>
